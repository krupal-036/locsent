{% extends "layout.html" %}

{% block head %}
<link rel="shortcut icon" href="https://cdn-icons-png.freepik.com/512/4550/4550214.png" type="image/x-icon">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
{% endblock %}

{% block content %}
<div class="dashboard-grid">
    <div class="card">
        <div class="card-header">
            <h2>Your Live Location &nbsp; <i class="fa-solid fa-location-dot"></i></h2>
        </div>
        <div class.card-body>
            <div id="user-map"></div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h2>Welcome, {{ user.username }}!</h2>
        </div>
        <div class="card-body">
            <p>Your location is shown on the map and will be sent to the administrator periodically.</p>
            <button class="btn btn-primary" id="send-location-btn" onclick="sendLocation()">
                Send Current Location Manually &nbsp; <i class="fa-solid fa-paper-plane"></i>
            </button>
            <p id="status-message" class="status-message"></p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
{% endblock %}